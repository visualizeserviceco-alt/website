{% extends "base.html" %}

{% block title %}Dashboard - {{ user.full_name }}{% endblock %}

{% block content %}
<!-- Header -->
<div class="portal-header">
    <div class="container">
        <div class="portal-nav">
            <a href="{{ url_for('index') }}" class="portal-logo">
                <img src="{{ url_for('serve_static_files', filename='assets/images/Visualize.svg') }}" alt="Visualize Logo">
                Visualize Studio
            </a>
            <div class="portal-user">
                <span>Welcome, {{ user.full_name }}</span>
                <a href="{{ url_for('logout') }}">Logout</a>
            </div>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="container">
        <div class="dashboard-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">Navigation</div>
                    <ul class="sidebar-links">
                        <li><a href="{{ url_for('dashboard') }}" class="active">Dashboard</a></li>
                        <li><a href="{{ url_for('client_info') }}">Client Resources</a></li>
                        <li><a href="{{ url_for('logout') }}">Logout</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">Client Info</div>
                    <p style="color: #cccccc; font-size: 0.9rem; line-height: 1.4;">
                        <strong>{{ user.full_name }}</strong><br>
                        {{ user.email }}<br>
                        {% if user.phone %}{{ user.phone }}<br>{% endif %}
                        <small style="color: #888;">Client since {{ user.created_at.strftime('%B %Y') }}</small>
                    </p>
                </div>
            </div>
            
            <!-- Main Dashboard -->
            <div class="dashboard-main">
                <h1 style="margin-bottom: 0.5rem;">Welcome back, {{ user.full_name.split()[0] }}!</h1>
                <p style="color: #888; margin-bottom: 2rem;">Here's an overview of your project with Visualize Studio.</p>
                
                <!-- Dashboard Cards -->
                <div class="dashboard-cards">
                    <!-- Project Status Card -->
                    <div class="dashboard-card">
                        <div class="card-title">Project Status</div>
                        <div class="card-value">
                            <span class="status-badge status-{{ user.project_stage.lower().replace(' ', '-') }}">
                                {{ user.project_stage }}
                            </span>
                        </div>
                        <div class="card-description">
                            Current phase of your project development
                        </div>
                    </div>
                    
                    <!-- Payment Status Card -->
                    <div class="dashboard-card">
                        <div class="card-title">Payment Status</div>
                        <div class="card-value">
                            <span class="status-badge status-{{ 'due' if user.payment_due > 0 else 'current' }}">
                                {{ user.payment_status }}
                            </span>
                        </div>
                        {% if user.payment_due > 0 %}
                        <div class="card-description">
                            Amount due: ${{ "%.2f"|format(user.payment_due) }}
                        </div>
                        {% else %}
                        <div class="card-description">
                            All payments up to date
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Account Status Card -->
                    <div class="dashboard-card">
                        <div class="card-title">Account Status</div>
                        <div class="card-value">
                            <span class="status-badge status-current">Active</span>
                        </div>
                        <div class="card-description">
                            Full access to client portal
                        </div>
                    </div>
                </div>
                
                <!-- Project Details Section -->
                <div style="margin-top: 3rem;">
                    <h2 style="margin-bottom: 1rem; color: #ffffff;">Project Details</h2>
                    <div class="dashboard-card">
                        <div class="card-title">Current Project</div>
                        <div class="card-description" style="font-size: 1rem; line-height: 1.6; margin-top: 1rem;">
                            {{ user.project_description or "Project details will be updated soon." }}
                        </div>
                        {% if user.notes %}
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #333;">
                            <div class="card-title">Notes & Updates</div>
                            <div class="card-description" style="font-size: 1rem; line-height: 1.6; margin-top: 0.5rem;">
                                {{ user.notes }}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div style="margin-top: 3rem;">
                    <h2 style="margin-bottom: 1rem; color: #ffffff;">Quick Actions</h2>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <a href="{{ url_for('client_info') }}" class="form-button" style="width: auto; padding: 12px 24px; text-decoration: none; display: inline-block;">
                            View Process Guide
                        </a>
                        <a href="mailto:hello@visualizestudio.org" class="form-button" style="width: auto; padding: 12px 24px; text-decoration: none; display: inline-block; background: #1a1a1a; border: 1px solid #444;">
                            Contact Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}